<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>YoTePÃºblico/Agencia Â· next level</title>
    <meta name="description" content="GestiÃ³n profesional de redes sociales: publicaciones manuales + flyers Â· 400 CUP">
    <meta name="theme-color" content="#4f46e5">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%234f46e5'/><text x='50' y='70' font-family='system-ui' font-size='60' text-anchor='middle' fill='white'>YP</text></svg>">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { color-scheme: light dark; }
        body {
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.4; background: #f9fafb; color: #111827;
            min-height: 100vh; display: flex; flex-direction: column;
        }
        .container { width: 100%; max-width: 1280px; margin: 0 auto; padding: 0 1rem; }
        .hidden { display: none !important; }
        .logo { display: flex; align-items: center; gap: 0.5rem; font-weight: 700; font-size: 1.25rem; color: #4f46e5; text-decoration: none; }
        .logo-icon { width: 2rem; height: 2rem; background: #4f46e5; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; }
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 0.25rem; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 600; font-size: 0.9rem; border: none; cursor: pointer; background: transparent; text-decoration: none; }
        .btn-primary { background: #4f46e5; color: white; }
        .btn-primary:hover { background: #4338ca; }
        .btn-secondary { background: #10b981; color: white; }
        .btn-secondary:hover { background: #059669; }
        .btn-outline { border: 2px solid #4f46e5; color: #4f46e5; }
        .btn-outline:hover { background: #4f46e5; color: white; }
        .btn-sm { padding: 0.25rem 0.75rem; font-size: 0.8rem; }
        .card { background: white; border-radius: 0.75rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); padding: 1rem; }
        .form-group { margin-bottom: 1rem; }
        .form-label { display: block; margin-bottom: 0.25rem; font-weight: 600; font-size: 0.9rem; color: #374151; }
        .form-control { width: 100%; padding: 0.5rem 0.75rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; font-size: 0.9rem; background: white; }
        .form-control:focus { outline: 2px solid #4f46e5; outline-offset: 1px; }
        .login-screen { position: fixed; inset: 0; background: #f9fafb; display: flex; align-items: center; justify-content: center; padding: 1rem; z-index: 1000; }
        .login-card { width: 100%; max-width: 26rem; }
        .main-header { position: sticky; top: 0; background: white; box-shadow: 0 1px 2px rgba(0,0,0,0.05); z-index: 100; }
        .header-content { display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 0; }
        .user-info { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; font-size: 0.9rem; color: #374151; }
        .hero-section { padding: 2rem 0; background: linear-gradient(135deg, #eef2ff 0%, #f3f4f6 100%); }
        .hero-content { text-align: center; max-width: 48rem; margin: 0 auto; }
        .hero-title { font-size: clamp(1.8rem, 5vw, 2.5rem); font-weight: 700; line-height: 1.2; margin-bottom: 0.5rem; }
        .hero-title span { color: #4f46e5; }
        .hero-description { font-size: 1rem; color: #4b5563; margin-bottom: 1.5rem; }
        .section { padding: 2rem 0; }
        .section-title { font-size: clamp(1.25rem, 4vw, 1.75rem); font-weight: 600; text-align: center; margin-bottom: 1.5rem; }
        .plan-card { max-width: 48rem; margin: 0 auto; }
        .plan-header { display: flex; flex-wrap: wrap; gap: 1rem; align-items: center; justify-content: space-between; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid #e5e7eb; }
        .plan-title { font-size: 1.25rem; font-weight: 700; }
        .plan-price { font-size: 2rem; font-weight: 800; color: #4f46e5; line-height: 1; }
        .plan-features { list-style: none; margin-bottom: 1rem; }
        .plan-feature { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0; border-bottom: 1px solid #e5e7eb; }
        .plan-feature:last-child { border-bottom: none; }
        .feature-icon { color: #10b981; font-size: 1.2rem; flex-shrink: 0; }
        .plan-notice { background: #eef2ff; border-radius: 0.5rem; padding: 0.75rem; margin-top: 1rem; border-left: 4px solid #4f46e5; font-size: 0.9rem; }
        .carousel-section { margin: 0 auto; max-width: 900px; }
        .carousel-container { position: relative; overflow: hidden; border-radius: 0.75rem; box-shadow: 0 2px 6px rgba(0,0,0,0.1); height: clamp(300px, 50vw, 450px); background: #eef2ff; }
        .carousel-track { display: flex; height: 100%; }
        .carousel-slide { min-width: 100%; height: 100%; }
        .carousel-image { width: 100%; height: 100%; object-fit: contain; background: #eef2ff; }
        .carousel-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.9); border: none; width: 2.5rem; height: 2.5rem; border-radius: 50%; font-size: 1.5rem; cursor: pointer; color: #4f46e5; box-shadow: 0 2px 4px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; }
        .carousel-btn:hover { background: white; }
        .carousel-btn-prev { left: 0.5rem; }
        .carousel-btn-next { right: 0.5rem; }
        .carousel-dots { position: absolute; bottom: 0.75rem; left: 0; right: 0; display: flex; justify-content: center; gap: 0.5rem; z-index: 10; }
        .carousel-dot { width: 0.75rem; height: 0.75rem; border-radius: 50%; background: rgba(255,255,255,0.6); border: none; cursor: pointer; padding: 0; }
        .carousel-dot.active { background: white; }
        .sms-section { background: linear-gradient(135deg, #f3f4f6 0%, #eef2ff 100%); margin-top: 1rem; }
        .sms-content { max-width: 36rem; margin: 0 auto; text-align: center; }
        .toast { position: fixed; bottom: 1rem; right: 1rem; background: #1f2937; color: white; padding: 0.75rem 1.25rem; border-radius: 0.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.2); z-index: 2000; max-width: 24rem; }
        .install-prompt { position: fixed; bottom: 1rem; left: 50%; transform: translateX(-50%); background: white; border-radius: 0.75rem; box-shadow: 0 4px 12px rgba(0,0,0,0.2); padding: 0.75rem; z-index: 2100; width: calc(100% - 2rem); max-width: 360px; border: 1px solid #e5e7eb; }
        .install-prompt-content { display: flex; align-items: center; gap: 0.75rem; position: relative; }
        .install-icon { width: 2.5rem; height: 2.5rem; background: #4f46e5; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.25rem; flex-shrink: 0; }
        .install-text h4 { font-size: 1rem; margin-bottom: 0.1rem; }
        .install-text p { font-size: 0.8rem; color: #4b5563; margin-bottom: 0.5rem; }
        .install-actions { display: flex; gap: 0.5rem; }
        .install-btn { padding: 0.25rem 0.5rem; font-size: 0.8rem; }
        .close-install { position: absolute; top: -0.25rem; right: -0.25rem; background: white; border: 1px solid #e5e7eb; border-radius: 50%; width: 1.5rem; height: 1.5rem; font-size: 1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; color: #6b7280; }
        @media (max-width: 640px) {
            .header-content { flex-direction: column; gap: 0.5rem; }
            .plan-header { flex-direction: column; align-items: flex-start; }
        }
        @media (prefers-color-scheme: dark) {
            body { background: #111827; color: #f9fafb; }
            .card, .main-header, .install-prompt { background: #1f2937; }
            .form-control { background: #374151; border-color: #4b5563; color: white; }
            .hero-section, .sms-section { background: #1e1b4b; }
            .plan-notice { background: #312e81; color: white; }
            .carousel-container { background: #1e1b4b; }
            .carousel-btn { background: #374151; color: #818cf8; }
        }
    </style>
</head>
<body>
    <div class="login-screen" id="loginScreen">
        <div class="login-card card">
            <div class="logo" style="justify-content:center; margin-bottom:1rem">
                <div class="logo-icon">YP</div><span>YoTePÃºblico</span>
            </div>
            <h2 class="section-title" style="font-size:1.4rem; margin-bottom:0.25rem">Registro</h2>
            <p style="text-align:center; color:#6b7280; margin-bottom:1.5rem; font-size:0.9rem">datos de tu negocio</p>
            <form id="loginForm">
                <div class="form-group"><label class="form-label" for="businessName">Negocio *</label><input type="text" id="businessName" class="form-control" required autocomplete="organization"></div>
                <div class="form-group"><label class="form-label" for="businessDescription">DescripciÃ³n *</label><textarea id="businessDescription" class="form-control" rows="2" required></textarea></div>
                <div class="form-group"><label class="form-label" for="businessLinks">Enlaces (separados por comas)</label><input type="text" id="businessLinks" class="form-control" autocomplete="url"></div>
                <div class="form-group"><label class="form-label" for="businessPhone">TelÃ©fono *</label><input type="tel" id="businessPhone" class="form-control" required autocomplete="tel"></div>
                <button type="submit" class="btn btn-primary" style="width:100%">Acceder</button>
            </form>
            <div style="margin-top:1rem; text-align:center"><button id="installAppBtn" class="btn btn-outline" style="width:100%">ðŸ“² Instalar app</button></div>
        </div>
    </div>
    <div class="main-content hidden" id="mainContent">
        <header class="main-header"><div class="container"><div class="header-content"><a href="#" class="logo"><div class="logo-icon">YP</div><span>YoTePÃºblico/Agencia</span></a><div class="header-actions"><span class="user-info" id="userInfo"></span><button class="btn btn-outline btn-sm" id="logoutBtn">Salir</button></div></div></div></header>
        <main>
            <section class="hero-section"><div class="container"><div class="hero-content"><h1 class="hero-title">ðŸš€ <span>YoTePÃºblico/Agencia</span></h1><p class="hero-description">PublicaciÃ³n manual en 6 redes + flyer Â· 400 CUP</p><div style="display:flex; gap:0.75rem; justify-content:center; flex-wrap:wrap"><a href="#servicios" class="btn btn-primary">Ver plan</a><a href="#flyers" class="btn btn-outline">Ejemplos</a></div></div></div></section>
            <section class="section" id="servicios"><div class="container"><h2 class="section-title">Plan Ãºnico</h2><div class="plan-card card"><div class="plan-header"><h3 class="plan-title">PublicaciÃ³n Unica</h3><div class="plan-price">400 CUP</div></div><ul class="plan-features"><li class="plan-feature"><span class="feature-icon">âœ…</span> Facebook (Perfil+Grupo)</li><li class="plan-feature"><span class="feature-icon">âœ…</span> WhatsApp (Canal+Comunidad)</li><li class="plan-feature"><span class="feature-icon">âœ…</span> Telegram (Canal+Grupo)</li><li class="plan-feature"><span class="feature-icon">âœ…</span> YouTube (Canal+Comunidad)</li><li class="plan-feature"><span class="feature-icon">âœ…</span> Instagram (Perfil)</li><li class="plan-feature"><span class="feature-icon">âœ…</span> Likee (Perfil)</li><li class="plan-feature"><span class="feature-icon">âœ…</span> Web + flyer</li></ul><div class="plan-notice"><strong>ðŸ’² 400 CUP por publicaciÃ³n</strong> Â· manual, sin bots, flyer incluido</div><div style="text-align:center; margin-top:1.5rem"><button class="btn btn-secondary" id="selectPlanBtn">Seleccionar plan</button></div></div></div></section>
            <section class="section" id="flyers"><div class="container"><h2 class="section-title">Flyers recientes</h2><div class="carousel-section"><div class="carousel-container" id="carouselContainer"><div class="carousel-track" id="carouselTrack"></div><button class="carousel-btn carousel-btn-prev" id="carouselPrev">â€¹</button><button class="carousel-btn carousel-btn-next" id="carouselNext">â€º</button><div class="carousel-dots" id="carouselDots"></div></div></div></div></section>
            <section class="section sms-section"><div class="container"><div class="sms-content"><h2 class="section-title">Enviar solicitud</h2><p class="sms-description" style="color:#4b5563; margin-bottom:1rem">Tus datos + plan vÃ­a SMS</p><button class="btn btn-secondary" id="sendSmsBtn">ðŸ“± Enviar SMS</button></div></div></section>
        </main>
    </div>
    <div class="install-prompt hidden" id="installPrompt"><div class="install-prompt-content"><button class="close-install" id="closeInstall">&times;</button><div class="install-icon">ðŸ“±</div><div class="install-text"><h4>Instalar YoTePÃºblico</h4><p>acceso rÃ¡pido sin conexiÃ³n</p><div class="install-actions"><button class="btn btn-primary install-btn" id="installButton">Instalar</button><button class="btn btn-outline install-btn" id="laterButton">Luego</button></div></div></div></div>
    <div class="toast hidden" id="toast"></div>
    <script>
        (function(){
            const D = {
                loginScreen: g('loginScreen'), mainContent: g('mainContent'), loginForm: g('loginForm'),
                logoutBtn: g('logoutBtn'), userInfo: g('userInfo'), selectPlanBtn: g('selectPlanBtn'),
                sendSmsBtn: g('sendSmsBtn'), toast: g('toast'), carouselTrack: g('carouselTrack'),
                carouselPrev: g('carouselPrev'), carouselNext: g('carouselNext'), carouselDots: g('carouselDots'),
                installAppBtn: g('installAppBtn'), installPrompt: g('installPrompt'),
                installButton: g('installButton'), laterButton: g('laterButton'), closeInstall: g('closeInstall')
            };
            function g(id){ return document.getElementById(id); }

            let state = {
                user: null,
                planSelected: false,
                flyers: [
                    { url:'https://i.ibb.co/1JdPLjXM/20260128-021128.jpg' },
                    { url:'https://i.ibb.co/NbvhVYq/20260128-122719.jpg' },
                    { url:'https://i.ibb.co/9HpFkMq7/image-1769807257258.jpg' },
                    { url:'https://i.ibb.co/FLW1s4Y8/image-1770738205218.jpg' },
                    { url:'https://i.ibb.co/CK2wtGHd/image-1770834657256.jpg' },
                    { url:'https://i.ibb.co/5gF8Ps57/IMG-20260127-WA0039.jpg' },
                    { url:'https://i.ibb.co/wNT0Scps/IMG-20260127-WA0038.jpg' },
                ],
                carouselIndex: 0,
                pwaPrompt: null
            };

            const STORE = {
                key: 'yotepublico_v2',
                save(data){ localStorage.setItem(this.key, JSON.stringify(data)); },
                load(){ try { return JSON.parse(localStorage.getItem(this.key)); } catch { return null; } },
                clear(){ localStorage.removeItem(this.key); }
            };

            function showToast(msg, dur=2500){
                D.toast.textContent = msg;
                D.toast.classList.remove('hidden');
                setTimeout(() => D.toast.classList.add('hidden'), dur);
            }

            function validPhone(p){ return /^[\d\s\+\-\(\)]{8,}$/.test(p.trim()); }

            function updateUserInfo(){
                if(state.user){
                    D.userInfo.innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg><span>${state.user.businessName}</span>`;
                }
            }

            function renderCarousel(){
                D.carouselTrack.innerHTML = '';
                D.carouselDots.innerHTML = '';
                state.flyers.forEach((f,i)=>{
                    let slide = document.createElement('div');
                    slide.className = 'carousel-slide';
                    let img = document.createElement('img');
                    img.className = 'carousel-image';
                    img.src = f.url;
                    img.alt = `flyer ${i+1}`;
                    img.loading = 'lazy';
                    img.onerror = ()=> img.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3Crect width='800' height='500' fill='%234f46e5'/%3E%3Ctext x='400' y='250' font-family='sans-serif' font-size='20' text-anchor='middle' fill='%23ffffff'%3EFlyer "+(i+1)+"%3C/text%3E%3C/svg%3E";
                    slide.appendChild(img);
                    D.carouselTrack.appendChild(slide);
                    let dot = document.createElement('button');
                    dot.className = `carousel-dot ${i===state.carouselIndex?'active':''}`;
                    dot.dataset.index = i;
                    dot.setAttribute('aria-label', `ir a flyer ${i+1}`);
                    D.carouselDots.appendChild(dot);
                });
                updateCarousel();
            }

            function updateCarousel(){
                D.carouselTrack.style.transform = `translateX(-${state.carouselIndex*100}%)`;
                Array.from(D.carouselDots.children).forEach((dot,i)=>dot.classList.toggle('active', i===state.carouselIndex));
            }

            function nextSlide(){ state.carouselIndex = (state.carouselIndex+1) % state.flyers.length; updateCarousel(); }
            function prevSlide(){ state.carouselIndex = (state.carouselIndex-1+state.flyers.length) % state.flyers.length; updateCarousel(); }
            function goToSlide(i){ if(i>=0 && i<state.flyers.length){ state.carouselIndex=i; updateCarousel(); } }

            function handleLogin(e){
                e.preventDefault();
                let name = g('businessName').value.trim(), desc = g('businessDescription').value.trim(),
                    links = g('businessLinks').value.trim(), phone = g('businessPhone').value.trim();
                if(!name || !desc || !phone) return showToast('Campos requeridos incompletos');
                if(!validPhone(phone)) return showToast('TelÃ©fono invÃ¡lido');
                state.user = { businessName:name, businessDescription:desc, businessLinks:links, businessPhone:phone };
                STORE.save(state.user);
                localStorage.removeItem('yotepublico_temp');
                D.loginScreen.classList.add('hidden');
                D.mainContent.classList.remove('hidden');
                updateUserInfo();
                renderCarousel();
                showToast(`Bienvenido ${name}`);
            }

            function handleLogout(){
                if(!confirm('Â¿Cerrar sesiÃ³n?')) return;
                STORE.clear(); state.user = null; state.planSelected = false;
                D.mainContent.classList.add('hidden'); D.loginScreen.classList.remove('hidden');
                g('loginForm').reset();
            }

            function handleSelectPlan(){
                if(state.planSelected){
                    showToast('Plan ya seleccionado');
                    return;
                }
                state.planSelected = true;
                D.selectPlanBtn.textContent = 'âœ“ Plan seleccionado';
                D.selectPlanBtn.disabled = true;
                showToast('Plan registrado');
            }

            function handleSendSMS(){
                if(!state.user) return showToast('Complete sus datos primero');
                let u = state.user;
                let links = u.businessLinks ? u.businessLinks.split(',').map(l=>l.trim()).filter(l=>l) : [];
                let msg = `*SOLICITUD YoTePÃºblico*\nNegocio: ${u.businessName}\nTel: ${u.businessPhone}\nDesc: ${u.businessDescription}`;
                if(links.length) msg += `\nEnlaces: ${links.join(', ')}`;
                msg += `\nPlan: PublicaciÃ³n integral (400 CUP)`;
                window.open(`sms:+5350728969?body=${encodeURIComponent(msg)}`, '_blank');
                showToast('Mensaje listo en app SMS');
            }

            function initPWA(){
                window.addEventListener('beforeinstallprompt', e=>{
                    e.preventDefault();
                    state.pwaPrompt = e;
                    D.installAppBtn.classList.remove('hidden');
                });
                window.addEventListener('appinstalled', ()=>{
                    state.pwaPrompt = null;
                    D.installPrompt.classList.add('hidden');
                    showToast('App instalada');
                });
                function showInstall(){ if(state.pwaPrompt) D.installPrompt.classList.remove('hidden'); }
                D.installAppBtn.addEventListener('click', ()=>{
                    if(state.pwaPrompt) state.pwaPrompt.prompt();
                    else showToast('No disponible o ya instalada');
                });
                D.installButton.addEventListener('click', ()=>{
                    if(state.pwaPrompt) state.pwaPrompt.prompt();
                });
                D.laterButton.addEventListener('click', ()=> D.installPrompt.classList.add('hidden'));
                D.closeInstall.addEventListener('click', ()=> D.installPrompt.classList.add('hidden'));
                setTimeout(showInstall, 3000);
            }

            function initAutoSave(){
                ['businessName','businessDescription','businessLinks','businessPhone'].forEach(id=>{
                    let el = g(id);
                    if(el) el.addEventListener('input', ()=>{
                        let data = {};
                        ['businessName','businessDescription','businessLinks','businessPhone'].forEach(f=> data[f] = g(f)?.value || '');
                        localStorage.setItem('yotepublico_temp', JSON.stringify(data));
                    });
                });
                let draft = localStorage.getItem('yotepublico_temp');
                if(draft){
                    try{
                        let data = JSON.parse(draft);
                        ['businessName','businessDescription','businessLinks','businessPhone'].forEach(f=>{
                            if(g(f) && data[f]) g(f).value = data[f];
                        });
                    }catch(e){}
                }
            }

            function loadSession(){
                let saved = STORE.load();
                if(saved){
                    state.user = saved;
                    D.loginScreen.classList.add('hidden');
                    D.mainContent.classList.remove('hidden');
                    updateUserInfo();
                    renderCarousel();
                }
            }

            D.loginForm.addEventListener('submit', handleLogin);
            D.logoutBtn.addEventListener('click', handleLogout);
            D.selectPlanBtn.addEventListener('click', handleSelectPlan);
            D.sendSmsBtn.addEventListener('click', handleSendSMS);
            D.carouselNext.addEventListener('click', nextSlide);
            D.carouselPrev.addEventListener('click', prevSlide);
            D.carouselDots.addEventListener('click', e=>{
                if(e.target.classList.contains('carousel-dot')) goToSlide(parseInt(e.target.dataset.index));
            });

            initAutoSave();
            loadSession();
            initPWA();
        })();
    </script>
</body>
</html>