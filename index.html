<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>YoTePÃºblico | Now Â· Promociona tu negocio</title>
    <!-- Meta etiquetas mejoradas para buscadores y redes sociales -->
    <meta name="description" content="GestiÃ³n profesional de redes sociales: publicaciones manuales + flyers Â· desde 150 CUP. Planes para WhatsApp y publicaciÃ³n integral.">
    <meta name="keywords" content="redes sociales, publicaciones, flyers, WhatsApp, marketing, Cuba, CUP">
    <meta name="author" content="YoTePÃºblico">
    <meta name="theme-color" content="#4f46e5">
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yotepublico.now/">
    <meta property="og:title" content="YoTePÃºblico | Now">
    <meta property="og:description" content="PublicaciÃ³n manual en 6 redes + flyer Â· 400 CUP Â· Plan WhatsApp 150 CUP">
    <meta property="og:image" content="https://i.ibb.co/1JdPLjXM/20260128-021128.jpg"> <!-- imagen destacada (primer flyer) -->
    <meta property="og:image:alt" content="YoTePÃºblico promociÃ³n">
    <meta property="og:site_name" content="YoTePÃºblico">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="YoTePÃºblico | Now">
    <meta name="twitter:description" content="PublicaciÃ³n manual + flyer Â· Plan WhatsApp 150 CUP">
    <meta name="twitter:image" content="https://i.ibb.co/1JdPLjXM/20260128-021128.jpg">
    <!-- Favicon mejorado: mÃºltiples tamaÃ±os y formatos -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%234f46e5'/%3E%3Ctext x='50' y='70' font-family='system-ui, sans-serif' font-size='60' text-anchor='middle' fill='white' font-weight='bold'%3EYP%3C/text%3E%3C/svg%3E">
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA/0lEQVRYhe2VPQ7CMAyF48A1mDkCA2fgClyYGLgFh8jKxMLGfRlRKZKaOHXyY4iU+kv7mjqx89M4AdA0TdM0k4iCqPtpnBpCtwfAcwHg4Dw77w6AA5gIHwD2wCboL9wBm8bfZAE4ArsgfQc2Xvw5AB+gtwC2wWYcA/hg1gVwDzbJNQO8g00yG8AH2CSTAL7AJnEG4AtsEmcAvsAmcQbgC2wSZwC+wCZxBuALbBJnAL7AJnEG4AtsEmcAvsAmcQbgC2wSZwC+wCZxBuALbBJnAL7AJnEG4AtsEmcAvsAmcQbgC2wSZwC+wCZxBuALbBJnAL7AJnEG4AtskglA0zRN0/xP3g+YQ2mWvI5XzgAAAABJRU5ErkJggg==">
    <link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAiElEQVR4AWNgGAU0B6RqGKiBsU4B4z+qGUDUDWAgC+D/SyD7H54QmwGkgp8BKYBp/A8k+ck2ACn4C8b/QeJ/yTYAKfiLxfY/sKJ/gWzF/19A8j9ZBoA0YwR/geJ/AcV/IsX/ovh/I8X/IsX/f6D4X6T4n0jxP0j8Dyj+jy3+0YI4jQAAGN5oUvY5hX4AAAAASUVORK5CYII=">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%234f46e5'/%3E%3Ctext x='50' y='70' font-family='system-ui, sans-serif' font-size='60' text-anchor='middle' fill='white' font-weight='bold'%3EYP%3C/text%3E%3C/svg%3E">
    <link rel="manifest" href="data:application/manifest+json,{ \"name\":\"YoTePÃºblico\", \"short_name\":\"YTP\", \"icons\":[{ \"src\":\"data:image/svg+xml,%3Csvg...\", \"sizes\":\"192x192\", \"type\":\"image/svg+xml\" }], \"theme_color\":\"#4f46e5\", \"background_color\":\"#f9fafb\" }">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { color-scheme: light dark; }
        body {
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.4; background: #f9fafb; color: #111827;
            min-height: 100vh; display: flex; flex-direction: column;
            position: relative;
            overflow-x: hidden;
        }
        /* Decoraciones mÃ¡s vibrantes y promocionales */
        body::before {
            content: '';
            position: fixed;
            top: -40vh;
            left: -10vw;
            width: 80vw;
            height: 80vh;
            background: radial-gradient(circle at 30% 40%, rgba(79, 70, 229, 0.25) 0%, rgba(236, 72, 153, 0.15) 40%, transparent 70%);
            z-index: 0;
            pointer-events: none;
            filter: blur(40px);
        }
        body::after {
            content: '';
            position: fixed;
            bottom: -20vh;
            right: -5vw;
            width: 70vw;
            height: 70vh;
            background: radial-gradient(circle at 70% 70%, rgba(16, 185, 129, 0.3) 0%, rgba(245, 158, 11, 0.2) 50%, transparent 80%);
            z-index: 0;
            pointer-events: none;
            filter: blur(50px);
        }
        .container { width: 100%; max-width: 1280px; margin: 0 auto; padding: 0 1rem; position: relative; z-index: 2; }
        .hidden { display: none !important; }
        .logo { display: flex; align-items: center; gap: 0.5rem; font-weight: 700; font-size: 1.25rem; color: #4f46e5; text-decoration: none; }
        .logo-icon { 
            width: 2rem; height: 2rem; background: linear-gradient(145deg, #4f46e5, #ec4899); 
            border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; 
            color: white; font-weight: 700; box-shadow: 0 6px 15px rgba(236, 72, 153, 0.4);
            transition: transform 0.2s ease;
        }
        .logo:hover .logo-icon { transform: scale(1.05) rotate(2deg); }
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 0.25rem; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 600; font-size: 0.9rem; border: none; cursor: pointer; background: transparent; text-decoration: none; transition: all 0.2s ease; }
        .btn-primary { 
            background: linear-gradient(145deg, #4f46e5, #ec4899); 
            color: white; box-shadow: 0 8px 16px -4px rgba(236, 72, 153, 0.5); 
            border: 1px solid rgba(255,255,255,0.2);
        }
        .btn-primary:hover { background: linear-gradient(145deg, #4338ca, #db2777); transform: translateY(-2px); box-shadow: 0 12px 20px -6px rgba(236, 72, 153, 0.6); }
        .btn-secondary { 
            background: linear-gradient(145deg, #10b981, #f59e0b); 
            color: white; box-shadow: 0 8px 16px -4px rgba(245, 158, 11, 0.4); 
        }
        .btn-secondary:hover { background: linear-gradient(145deg, #059669, #d97706); transform: translateY(-2px); }
        .btn-outline { border: 2px solid #4f46e5; color: #4f46e5; background: rgba(255,255,255,0.7); backdrop-filter: blur(4px); }
        .btn-outline:hover { background: #4f46e5; color: white; border-color: #4f46e5; }
        .btn-sm { padding: 0.25rem 0.75rem; font-size: 0.8rem; }
        .card { 
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); 
            border-radius: 1.5rem; box-shadow: 0 20px 35px -8px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(79, 70, 229, 0.2); 
            padding: 1.5rem; border: 1px solid rgba(255,255,255,0.6); 
        }
        .form-group { margin-bottom: 1.2rem; }
        .form-label { display: block; margin-bottom: 0.3rem; font-weight: 600; font-size: 0.9rem; color: #1f2937; letter-spacing: -0.01em; }
        .form-control { 
            width: 100%; padding: 0.65rem 0.9rem; border: 2px solid #e5e7eb; border-radius: 0.75rem; 
            font-size: 0.95rem; background: white; transition: border 0.2s, box-shadow 0.2s; 
        }
        .form-control:focus { outline: none; border-color: #4f46e5; box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.25), 0 0 15px #ec4899; }
        .login-screen { position: fixed; inset: 0; background: rgba(249, 250, 251, 0.8); backdrop-filter: blur(12px); display: flex; align-items: center; justify-content: center; padding: 1rem; z-index: 1000; }
        .login-card { width: 100%; max-width: 28rem; position: relative; overflow: hidden; }
        .login-card::before {
            content: '';
            position: absolute;
            top: -40%;
            left: -30%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(79, 70, 229, 0.3) 0%, rgba(236, 72, 153, 0.2) 60%, transparent 80%);
            border-radius: 50%;
            z-index: -1;
            filter: blur(30px);
        }
        .login-card::after {
            content: '';
            position: absolute;
            bottom: -30%;
            right: -20%;
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.3) 0%, rgba(245, 158, 11, 0.2) 60%, transparent 80%);
            border-radius: 50%;
            z-index: -1;
            filter: blur(30px);
        }
        .main-header { 
            position: sticky; top: 0; background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(16px); 
            box-shadow: 0 4px 20px -8px rgba(79, 70, 229, 0.3); z-index: 100; border-bottom: 1px solid rgba(236, 72, 153, 0.3); 
        }
        .header-content { display: flex; align-items: center; justify-content: space-between; padding: 0.6rem 0; }
        .user-info { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; font-size: 0.9rem; color: #374151; background: #f3f4f6; padding: 0.3rem 1rem 0.3rem 0.8rem; border-radius: 2rem; border: 1px solid #4f46e5; }
        .hero-section { 
            padding: 3rem 0; 
            background: linear-gradient(145deg, #eef2ff, #fce7f3, #ffffff); 
            position: relative; 
            border-bottom: 4px solid #ec4899;
        }
        .hero-section::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(to bottom right, transparent 49%, #f9fafb 50%);
            pointer-events: none;
        }
        .hero-content { text-align: center; max-width: 48rem; margin: 0 auto; }
        .hero-title { 
            font-size: clamp(1.8rem, 5vw, 2.8rem); font-weight: 800; line-height: 1.2; margin-bottom: 0.5rem; 
            background: linear-gradient(135deg, #111827, #4f46e5, #ec4899); 
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
            text-shadow: 0 0 20px rgba(236,72,153,0.3);
        }
        .hero-description { font-size: 1.1rem; color: #1f2937; margin-bottom: 1.5rem; font-weight: 500; }
        .section { padding: 3rem 0; }
        .section-title { font-size: clamp(1.5rem, 4vw, 2rem); font-weight: 700; text-align: center; margin-bottom: 2rem; letter-spacing: -0.02em; background: linear-gradient(135deg, #4f46e5, #10b981); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .plans-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; max-width: 900px; margin: 0 auto; }
        .plan-card { 
            border-left: 4px solid #ec4899; height: 100%; display: flex; flex-direction: column; 
            background: rgba(255,255,255,0.95); backdrop-filter: blur(10px);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .plan-card:hover { transform: translateY(-6px); box-shadow: 0 30px 40px -15px rgba(236,72,153,0.5); }
        .plan-header { display: flex; flex-wrap: wrap; gap: 1rem; align-items: center; justify-content: space-between; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px dashed #4f46e5; }
        .plan-title { font-size: 1.35rem; font-weight: 800; background: linear-gradient(135deg, #4f46e5, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .plan-price { font-size: 2.2rem; font-weight: 800; color: #ec4899; line-height: 1; text-shadow: 0 2px 10px rgba(236,72,153,0.3); }
        .plan-features { list-style: none; margin-bottom: 1rem; flex-grow: 1; }
        .plan-feature { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0; border-bottom: 1px solid #f3e8ff; }
        .feature-icon { color: #10b981; font-size: 1.2rem; flex-shrink: 0; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1)); }
        .plan-notice { background: linear-gradient(145deg, #eef2ff, #fae8ff); border-radius: 1rem; padding: 0.75rem; margin-top: 1rem; border-left: 4px solid #ec4899; font-size: 0.9rem; }
        .carousel-section { margin: 0 auto; max-width: 900px; }
        .carousel-container { position: relative; overflow: hidden; border-radius: 1.5rem; box-shadow: 0 25px 40px -12px #4f46e5; height: clamp(300px, 50vw, 450px); background: #eef2ff; border: 2px solid #ec4899; }
        .carousel-track { display: flex; height: 100%; transition: transform 0.3s ease-out; }
        .carousel-slide { min-width: 100%; height: 100%; }
        .carousel-image { width: 100%; height: 100%; object-fit: contain; background: #eef2ff; }
        .carousel-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.95); border: none; width: 2.8rem; height: 2.8rem; border-radius: 50%; font-size: 1.8rem; cursor: pointer; color: #4f46e5; box-shadow: 0 8px 20px rgba(236,72,153,0.5); display: flex; align-items: center; justify-content: center; backdrop-filter: blur(4px); transition: all 0.2s; border: 1px solid white; }
        .carousel-btn:hover { background: white; transform: translateY(-50%) scale(1.1); color: #ec4899; }
        .carousel-btn-prev { left: 0.75rem; }
        .carousel-btn-next { right: 0.75rem; }
        .carousel-dots { position: absolute; bottom: 0.75rem; left: 0; right: 0; display: flex; justify-content: center; gap: 0.5rem; z-index: 10; }
        .carousel-dot { width: 0.9rem; height: 0.9rem; border-radius: 50%; background: rgba(255,255,255,0.7); border: 1px solid #4f46e5; cursor: pointer; padding: 0; transition: all 0.2s; }
        .carousel-dot.active { background: #ec4899; transform: scale(1.3); box-shadow: 0 0 0 3px #4f46e5; }
        .sms-section { background: linear-gradient(145deg, #f3e8ff, #e0f2fe); margin-top: 1rem; position: relative; border-top: 4px solid #10b981; }
        .sms-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.1"><path d="M10 50 Q 30 30, 50 50 T 90 50" stroke="%23ec4899" fill="none" stroke-width="2"/><path d="M20 40 Q 40 60, 60 40 T 100 40" stroke="%234f46e5" fill="none" stroke-width="2"/></svg>');
            background-repeat: repeat;
            pointer-events: none;
        }
        .sms-content { max-width: 36rem; margin: 0 auto; text-align: center; position: relative; z-index: 2; }
        .toast { position: fixed; bottom: 1rem; right: 1rem; background: #1f2937; color: white; padding: 0.75rem 1.25rem; border-radius: 0.5rem; box-shadow: 0 8px 20px rgba(0,0,0,0.3); z-index: 2000; max-width: 24rem; border-left: 4px solid #ec4899; }
        @media (max-width: 640px) {
            .header-content { flex-direction: column; gap: 0.5rem; }
            .plans-grid { grid-template-columns: 1fr; }
        }
        @media (prefers-color-scheme: dark) {
            body { background: #111827; color: #f9fafb; }
            body::before, body::after { opacity: 0.5; }
            .card, .main-header { background: #1f2937; border-color: #4f46e5; }
            .form-control { background: #374151; border-color: #4f46e5; color: white; }
            .hero-section { background: linear-gradient(145deg, #1e1b4b, #312e81, #111827); }
            .hero-section::after { background: linear-gradient(to bottom right, transparent 49%, #111827 50%); }
            .plan-notice { background: #312e81; color: white; }
            .carousel-container { background: #1e1b4b; }
            .carousel-btn { background: #374151; color: #818cf8; }
            .user-info { background: #2d2d3a; color: #e5e7eb; border-color: #ec4899; }
            .form-label { color: #e5e7eb; }
        }
    </style>
</head>
<body>
    <div class="login-screen" id="loginScreen">
        <div class="login-card card">
            <div class="logo" style="justify-content:center; margin-bottom:1rem">
                <div class="logo-icon">YP</div><span style="background: linear-gradient(135deg,#4f46e5,#ec4899); -webkit-background-clip:text; -webkit-text-fill-color:transparent;">YoTePÃºblico | Now</span>
            </div>
            <h2 class="section-title" style="font-size:1.4rem; margin-bottom:0.25rem">Registro</h2>
            <p style="text-align:center; color:#6b7280; margin-bottom:1.5rem; font-size:0.9rem">datos de tu negocio</p>
            <form id="loginForm">
                <div class="form-group"><label class="form-label" for="businessName">Negocio *</label><input type="text" id="businessName" class="form-control" required autocomplete="organization" placeholder="ej: Mi Emprendimiento"></div>
                <div class="form-group"><label class="form-label" for="businessDescription">DescripciÃ³n *</label><textarea id="businessDescription" class="form-control" rows="2" required placeholder="breve descripciÃ³n"></textarea></div>
                <div class="form-group"><label class="form-label" for="businessLinks">Enlaces (separados por comas)</label><input type="text" id="businessLinks" class="form-control" autocomplete="url" placeholder="ej: instagram.com/miempresa, fb.com/miempresa"></div>
                <div class="form-group"><label class="form-label" for="businessPhone">TelÃ©fono *</label><input type="tel" id="businessPhone" class="form-control" required autocomplete="tel" placeholder="+53 5 123 4567"></div>
                <button type="submit" class="btn btn-primary" style="width:100%">Acceder</button>
            </form>
        </div>
    </div>
    <div class="main-content hidden" id="mainContent">
        <header class="main-header"><div class="container"><div class="header-content"><a href="#" class="logo"><div class="logo-icon">YP</div><span style="background: linear-gradient(135deg,#4f46e5,#ec4899); -webkit-background-clip:text; -webkit-text-fill-color:transparent;">YoTePÃºblico | Now</span></a><div class="header-actions"><span class="user-info" id="userInfo"></span><button class="btn btn-outline btn-sm" id="logoutBtn">Salir</button></div></div></div></header>
        <main>
            <section class="hero-section"><div class="container"><div class="hero-content"><h1 class="hero-title">ðŸš€ <span>YoTePÃºblico/Agencia</span></h1><p class="hero-description">PublicaciÃ³n manual en 6 redes + flyer Â· 400 CUP Â· Plan WhatsApp 150 CUP</p><div style="display:flex; gap:0.75rem; justify-content:center; flex-wrap:wrap"><a href="#servicios" class="btn btn-primary">Ver planes</a><a href="#flyers" class="btn btn-outline">Ejemplos</a></div></div></div></section>
            
            <section class="section" id="servicios"><div class="container"><h2 class="section-title">Planes de publicaciÃ³n</h2>
                <div class="plans-grid">
                    <!-- Plan completo (existente) -->
                    <div class="plan-card card">
                        <div class="plan-header"><h3 class="plan-title">Plan - Completo</h3><div class="plan-price">400 CUP</div></div>
                        <ul class="plan-features">
                            <li class="plan-feature"><span class="feature-icon">âœ…</span> Facebook (Perfil+Grupo)</li>
                            <li class="plan-feature"><span class="feature-icon">âœ…</span> WhatsApp (Canal+Comunidad)</li>
                            <li class="plan-feature"><span class="feature-icon">âœ…</span> Telegram (Canal+Grupo)</li>
                            <li class="plan-feature"><span class="feature-icon">âœ…</span> YouTube (Canal+Comunidad)</li>
                            <li class="plan-feature"><span class="feature-icon">âœ…</span> Instagram (Perfil)</li>
                            <li class="plan-feature"><span class="feature-icon">âœ…</span> Likee (Perfil)</li>
                            <li class="plan-feature"><span class="feature-icon">âœ…</span> Web + flyer</li>
                        </ul>
                        <div class="plan-notice"><strong>ðŸ’² 400 CUP por publicaciÃ³n</strong> Â· manual, sin bots</div>
                        <div style="text-align:center; margin-top:1.5rem">
                            <button class="btn btn-primary" id="selectFullPlanBtn">Seleccionar plan</button>
                        </div>
                    </div>
                    <!-- Nuevo plan WhatsApp a 150 CUP -->
                    <div class="plan-card card">
                        <div class="plan-header"><h3 class="plan-title">Plan - WhatsApp</h3><div class="plan-price">150 CUP</div></div>
                        <ul class="plan-features">
                            <li class="plan-feature"><span class="feature-icon">ðŸ“±</span> Canal + Comunidad + Grupos</li>
                            <li class="plan-feature"><span class="feature-icon">ðŸ“±</span> Estado destacado</li>
                            <li class="plan-feature"><span class="feature-icon">âœ…</span> Flyer</li>
                        </ul>
                        <div class="plan-notice"><strong>ðŸ’² 150 CUP por publicaciÃ³n</strong> Â· solo WhatsApp + flyer</div>
                        <div style="text-align:center; margin-top:1.5rem">
                            <button class="btn btn-secondary" id="selectWappPlanBtn">Seleccionar WhatsApp</button>
                        </div>
                    </div>
                </div>
            </div></section>

            <section class="section" id="flyers"><div class="container"><h2 class="section-title">Flyers recientes</h2><div class="carousel-section"><div class="carousel-container" id="carouselContainer"><div class="carousel-track" id="carouselTrack"></div><button class="carousel-btn carousel-btn-prev" id="carouselPrev">â€¹</button><button class="carousel-btn carousel-btn-next" id="carouselNext">â€º</button><div class="carousel-dots" id="carouselDots"></div></div></div></div></section>
            
            <section class="section sms-section"><div class="container"><div class="sms-content"><h2 class="section-title">Enviar solicitud</h2><p class="sms-description" style="color:#1f2937; margin-bottom:1rem">Tus datos + plan seleccionado vÃ­a SMS</p><button class="btn btn-secondary" id="sendSmsBtn">ðŸ“± Enviar SMS ahora</button></div></div></section>
        </main>
    </div>
    <div class="toast hidden" id="toast"></div>
    <script>
        (function(){
            function g(id){ return document.getElementById(id); }
            const D = {
                loginScreen: g('loginScreen'), mainContent: g('mainContent'), loginForm: g('loginForm'),
                logoutBtn: g('logoutBtn'), userInfo: g('userInfo'),
                selectFullPlanBtn: g('selectFullPlanBtn'), selectWappPlanBtn: g('selectWappPlanBtn'),
                sendSmsBtn: g('sendSmsBtn'), toast: g('toast'), carouselTrack: g('carouselTrack'),
                carouselPrev: g('carouselPrev'), carouselNext: g('carouselNext'), carouselDots: g('carouselDots')
            };
            let state = {
                user: null,
                selectedPlan: null, // { type: 'full' | 'wapp', name: string, price: number }
                flyers: [
                    { url:'https://i.ibb.co/1JdPLjXM/20260128-021128.jpg' },
                    { url:'https://i.ibb.co/NbvhVYq/20260128-122719.jpg' },
                    { url:'https://i.ibb.co/9HpFkMq7/image-1769807257258.jpg' },
                    { url:'https://i.ibb.co/FLW1s4Y8/image-1770738205218.jpg' },
                    { url:'https://i.ibb.co/CK2wtGHd/image-1770834657256.jpg' },
                    { url:'https://i.ibb.co/5gF8Ps57/IMG-20260127-WA0039.jpg' },
                    { url:'https://i.ibb.co/wNT0Scps/IMG-20260127-WA0038.jpg' }
                ],
                carouselIndex: 0
            };
            const STORE = {
                key: 'yotepublico_v3',
                save(data){ localStorage.setItem(this.key, JSON.stringify(data)); },
                load(){ try { return JSON.parse(localStorage.getItem(this.key)); } catch { return null; } },
                clear(){ localStorage.removeItem(this.key); }
            };
            function showToast(msg, dur=2500){
                D.toast.textContent = msg;
                D.toast.classList.remove('hidden');
                setTimeout(() => D.toast.classList.add('hidden'), dur);
            }
            function validPhone(p){ return /^[\d\s\+\-\(\)]{8,}$/.test(p.trim()); }
            function updateUserInfo(){
                if(state.user){
                    D.userInfo.innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg><span>${state.user.businessName}</span>`;
                }
            }
            function renderCarousel(){
                D.carouselTrack.innerHTML = '';
                D.carouselDots.innerHTML = '';
                state.flyers.forEach((f,i)=>{
                    let slide = document.createElement('div');
                    slide.className = 'carousel-slide';
                    let img = document.createElement('img');
                    img.className = 'carousel-image';
                    img.src = f.url;
                    img.alt = `flyer ${i+1}`;
                    img.loading = 'lazy';
                    img.onerror = ()=> img.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3Crect width='800' height='500' fill='%234f46e5'/%3E%3Ctext x='400' y='250' font-family='sans-serif' font-size='20' text-anchor='middle' fill='%23ffffff'%3EFlyer "+(i+1)+"%3C/text%3E%3C/svg%3E";
                    slide.appendChild(img);
                    D.carouselTrack.appendChild(slide);
                    let dot = document.createElement('button');
                    dot.className = `carousel-dot ${i===state.carouselIndex?'active':''}`;
                    dot.dataset.index = i;
                    dot.setAttribute('aria-label', `ir a flyer ${i+1}`);
                    D.carouselDots.appendChild(dot);
                });
                updateCarousel();
            }
            function updateCarousel(){
                D.carouselTrack.style.transform = `translateX(-${state.carouselIndex*100}%)`;
                Array.from(D.carouselDots.children).forEach((dot,i)=>dot.classList.toggle('active', i===state.carouselIndex));
            }
            function nextSlide(){ state.carouselIndex = (state.carouselIndex+1) % state.flyers.length; updateCarousel(); }
            function prevSlide(){ state.carouselIndex = (state.carouselIndex-1+state.flyers.length) % state.flyers.length; updateCarousel(); }
            function goToSlide(i){ if(i>=0 && i<state.flyers.length){ state.carouselIndex=i; updateCarousel(); } }
            
            function handleLogin(e){
                e.preventDefault();
                let name = g('businessName').value.trim(), desc = g('businessDescription').value.trim(),
                    links = g('businessLinks').value.trim(), phone = g('businessPhone').value.trim();
                if(!name || !desc || !phone) return showToast('Campos requeridos incompletos');
                if(!validPhone(phone)) return showToast('TelÃ©fono invÃ¡lido');
                state.user = { businessName:name, businessDescription:desc, businessLinks:links, businessPhone:phone };
                STORE.save(state.user);
                localStorage.removeItem('yotepublico_temp');
                D.loginScreen.classList.add('hidden');
                D.mainContent.classList.remove('hidden');
                updateUserInfo();
                renderCarousel();
                showToast(`Bienvenido ${name}`);
            }
            function handleLogout(){
                if(!confirm('Â¿Cerrar sesiÃ³n?')) return;
                STORE.clear(); state.user = null; state.selectedPlan = null;
                D.mainContent.classList.add('hidden'); D.loginScreen.classList.remove('hidden');
                g('loginForm').reset();
                // Resetear botones de planes
                if(D.selectFullPlanBtn) { D.selectFullPlanBtn.textContent = 'Seleccionar plan'; D.selectFullPlanBtn.disabled = false; }
                if(D.selectWappPlanBtn) { D.selectWappPlanBtn.textContent = 'Seleccionar WhatsApp'; D.selectWappPlanBtn.disabled = false; }
            }
            
            function handleSelectPlan(type) {
                if(!state.user) { showToast('Primero regÃ­strate'); return; }
                if(type === 'full') {
                    state.selectedPlan = { type: 'full', name: 'PublicaciÃ³n Integral', price: 400 };
                    D.selectFullPlanBtn.textContent = 'âœ“ Plan seleccionado';
                    D.selectFullPlanBtn.disabled = true;
                    if(D.selectWappPlanBtn) { D.selectWappPlanBtn.textContent = 'Seleccionar WhatsApp'; D.selectWappPlanBtn.disabled = false; }
                    showToast('Plan integral seleccionado');
                } else if(type === 'wapp') {
                    state.selectedPlan = { type: 'wapp', name: 'WhatsApp Pro', price: 150 };
                    D.selectWappPlanBtn.textContent = 'âœ“ WhatsApp seleccionado';
                    D.selectWappPlanBtn.disabled = true;
                    if(D.selectFullPlanBtn) { D.selectFullPlanBtn.textContent = 'Seleccionar plan'; D.selectFullPlanBtn.disabled = false; }
                    showToast('Plan WhatsApp seleccionado');
                }
            }
            
            function handleSendSMS(){
                if(!state.user) return showToast('Complete sus datos primero');
                if(!state.selectedPlan) return showToast('Seleccione un plan primero');
                let u = state.user;
                let links = u.businessLinks ? u.businessLinks.split(',').map(l=>l.trim()).filter(l=>l) : [];
                let msg = `*SOLICITUD YoTePÃºblico*\nNegocio: ${u.businessName}\nTel: ${u.businessPhone}\nDesc: ${u.businessDescription}`;
                if(links.length) msg += `\nEnlaces: ${links.join(', ')}`;
                msg += `\nPlan: ${state.selectedPlan.name} (${state.selectedPlan.price} CUP)`;
                window.open(`sms:+5350728969?body=${encodeURIComponent(msg)}`, '_blank');
                showToast('Mensaje listo en app SMS');
            }
            
            function initAutoSave(){
                ['businessName','businessDescription','businessLinks','businessPhone'].forEach(id=>{
                    let el = g(id);
                    if(el) el.addEventListener('input', ()=>{
                        let data = {};
                        ['businessName','businessDescription','businessLinks','businessPhone'].forEach(f=> data[f] = g(f)?.value || '');
                        localStorage.setItem('yotepublico_temp', JSON.stringify(data));
                    });
                });
                let draft = localStorage.getItem('yotepublico_temp');
                if(draft){
                    try{
                        let data = JSON.parse(draft);
                        ['businessName','businessDescription','businessLinks','businessPhone'].forEach(f=>{
                            if(g(f) && data[f]) g(f).value = data[f];
                        });
                    }catch(e){}
                }
            }
            function loadSession(){
                let saved = STORE.load();
                if(saved){
                    state.user = saved;
                    D.loginScreen.classList.add('hidden');
                    D.mainContent.classList.remove('hidden');
                    updateUserInfo();
                    renderCarousel();
                }
            }
            
            // Event listeners
            D.loginForm.addEventListener('submit', handleLogin);
            D.logoutBtn.addEventListener('click', handleLogout);
            D.selectFullPlanBtn.addEventListener('click', ()=> handleSelectPlan('full'));
            D.selectWappPlanBtn.addEventListener('click', ()=> handleSelectPlan('wapp'));
            D.sendSmsBtn.addEventListener('click', handleSendSMS);
            D.carouselNext.addEventListener('click', nextSlide);
            D.carouselPrev.addEventListener('click', prevSlide);
            D.carouselDots.addEventListener('click', e=>{
                if(e.target.classList.contains('carousel-dot')) goToSlide(parseInt(e.target.dataset.index));
            });
            
            initAutoSave();
            loadSession();
        })();
    </script>
</body>
</html>